pipeline {
    agent any

 

    stages {
        stage('API Call') {
            steps {
                script {
                    def apiUrl = 'https://jsonplaceholder.typicode.com/todos/1'
                    def apiResponse = sh(script: "curl -s -w '%{http_code}' $apiUrl", returnStdout: true).trim()

 

                    echo "API Response Code: ${apiResponse}"

 

                    if (apiResponse == '200') {
                        echo "API call successful"
                        // You can continue processing the API response here
                    } else {
                        error "API call failed with response code ${apiResponse}"
                    }
                }
            }
        }
    }
}
